"use strict";(self["webpackChunkzmwk_session_archive"]=self["webpackChunkzmwk_session_archive"]||[]).push([[170],{8292:function(e,a,l){l.d(a,{A:function(){return i}});var t=l(6768);const c={class:"loading-box"};function u(e,a){const l=(0,t.g2)("a-spin");return(0,t.uX)(),(0,t.CE)("div",c,[(0,t.bF)(l)])}var s=l(1241);const v={},r=(0,s.A)(v,[["render",u],["__scopeId","data-v-3d53ffb8"]]);var i=r},3011:function(e,a,l){l.r(a),l.d(a,{default:function(){return X}});var t=l(6768),c=l(4232),u=l(144),s=l(7694),v=l(7894),r=l(1824),i=l(8298),n=l(8292);const _={class:"zm-main-box"},o={class:"form-block"},k={class:"form-block-item"},d={class:"form-block-content"},b={class:"c595959"},f={class:"c595959"},p={class:"c595959"},h={class:"form-block-item"},y={class:"form-block-content"},m={class:"form-block-item"},g={class:"form-block-content"},F={class:"c595959"},L={class:"c595959"};var C={__name:"authConfig",setup(e){const a=(0,u.KR)(!0),l=(0,u.KR)(!1),C=(0,u.KR)(!1),w=(0,u.KR)(!1),R=(0,u.KR)(!1),X=(0,u.KR)({}),K=(0,u.KR)({id:"",agent_id:"",agent_secret:"",chat_public_key:"",chat_private_key:"",chat_public_key_version:"",chat_secret:""});(0,t.sV)((()=>{W()}));const W=()=>{a.value=!0,(0,r.Gu)({show_config:!0}).then((e=>{K.value=e.data||{},X.value=(0,i.t0)(K.value)})).finally((()=>{a.value=!1}))},A=()=>{if(l.value)try{if(w.value=!0,K.value.agent_secret=K.value.agent_secret.trim(),!K.value.agent_secret)throw"请输入自建应用密钥";(0,r.s3)({agent_secret:K.value.agent_secret}).then((()=>{s.Ay.success("已保存"),l.value=!l.value,X.value.agent_secret=K.value.agent_secret})).finally((()=>{w.value=!1}))}catch(e){w.value=!1,s.Ay.error(e)}},z=()=>{l.value=!1,K.value=(0,i.t0)(X.value)},E=()=>{if(C.value)try{if(R.value=!0,K.value.chat_secret=K.value.chat_secret.trim(),!K.value.chat_secret)throw"请输入会话存档密钥";if(!K.value.chat_public_key_version)throw"请输入公钥版本号";(0,r.s3)({chat_secret:K.value.chat_secret,chat_public_key_version:K.value.chat_public_key_version}).then((()=>{s.Ay.success("已保存"),C.value=!C.value,X.value.chat_secret=K.value.chat_secret,X.value.chat_public_key_version=K.value.chat_public_key_version})).finally((()=>{R.value=!1}))}catch(e){R.value=!1,s.Ay.error(e)}},D=()=>{C.value=!1,K.value=(0,i.t0)(X.value)};return(e,s)=>{const r=(0,t.g2)("a-form-item"),X=(0,t.g2)("a-input"),W=(0,t.g2)("a-button"),I=(0,t.g2)("a-input-number"),U=(0,t.g2)("a-form");return(0,t.uX)(),(0,t.Wv)(v.A,{title:"会话存档配置信息"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",_,[a.value?((0,t.uX)(),(0,t.Wv)(n.A,{key:0})):((0,t.uX)(),(0,t.Wv)(U,{key:1,"label-col":{span:6},"wrapper-col":{span:10},autocomplete:"off"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",o,[(0,t.Lk)("div",k,[s[10]||(s[10]=(0,t.Lk)("div",{class:"form-block-title"},"基础信息",-1)),(0,t.Lk)("div",d,[(0,t.bF)(r,{label:"企业ID"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",b,(0,c.v_)(K.value.id),1)])),_:1}),(0,t.bF)(r,{label:"自建应用ID"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",f,(0,c.v_)(K.value.agent_id),1)])),_:1}),l.value?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.bF)(r,{label:"自建应用密钥"},{default:(0,t.k6)((()=>[(0,t.bF)(X,{value:K.value.agent_secret,"onUpdate:value":s[0]||(s[0]=e=>K.value.agent_secret=e),placeholder:"请输入自建应用密钥"},null,8,["value"])])),_:1}),(0,t.bF)(r,{"wrapper-col":{span:10,offset:6}},{default:(0,t.k6)((()=>[(0,t.bF)(W,{class:"mr8",onClick:z},{default:(0,t.k6)((()=>s[7]||(s[7]=[(0,t.eW)("取 消")]))),_:1}),(0,t.bF)(W,{type:"primary",onClick:A,loading:w.value},{default:(0,t.k6)((()=>s[8]||(s[8]=[(0,t.eW)("保 存 ")]))),_:1},8,["loading"])])),_:1})],64)):((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.bF)(r,{label:"自建应用密钥"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",p,(0,c.v_)((0,u.R1)(i.Xl)(K.value.agent_secret)),1)])),_:1}),(0,t.bF)(r,{"wrapper-col":{span:10,offset:6}},{default:(0,t.k6)((()=>[(0,t.bF)(W,{type:"primary",onClick:s[1]||(s[1]=e=>l.value=!0)},{default:(0,t.k6)((()=>s[9]||(s[9]=[(0,t.eW)("修 改")]))),_:1})])),_:1})],64))])]),(0,t.Lk)("div",h,[s[13]||(s[13]=(0,t.Lk)("div",{class:"form-block-title"},"复制以下信息并填入到企业微信后台",-1)),(0,t.Lk)("div",y,[(0,t.bF)(r,{label:"加密公钥",class:"label-height-unset"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",{class:"c595959 zm-pointer",onClick:s[2]||(s[2]=e=>(0,u.R1)(i.Dk)(K.value.chat_public_key))},[s[11]||(s[11]=(0,t.Lk)("div",null,[(0,t.Lk)("a",null,"点击复制")],-1)),(0,t.eW)(" "+(0,c.v_)((0,u.R1)(i.Xl)(K.value.chat_public_key)),1)])])),_:1}),(0,t.bF)(r,{label:"加密私钥",class:"label-height-unset"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",{class:"c595959 zm-pointer",onClick:s[3]||(s[3]=e=>(0,u.R1)(i.Dk)(K.value.chat_private_key))},[s[12]||(s[12]=(0,t.Lk)("div",null,[(0,t.Lk)("a",null,"点击复制")],-1)),(0,t.eW)(" "+(0,c.v_)((0,u.R1)(i.Xl)(K.value.chat_private_key,80)),1)])])),_:1})])]),(0,t.Lk)("div",m,[s[17]||(s[17]=(0,t.Lk)("div",{class:"form-block-title"},"将企业微信后台会话存档配置页面的信息复制粘贴到下框中",-1)),(0,t.Lk)("div",g,[C.value?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.bF)(r,{label:"会话存档密钥",name:"corp_id"},{default:(0,t.k6)((()=>[(0,t.bF)(X,{value:K.value.chat_secret,"onUpdate:value":s[4]||(s[4]=e=>K.value.chat_secret=e),placeholder:"请输入会话存档密钥"},null,8,["value"])])),_:1}),(0,t.bF)(r,{label:"公钥版本号",name:"corp_id"},{default:(0,t.k6)((()=>[(0,t.bF)(I,{style:{width:"100%"},precision:0,value:K.value.chat_public_key_version,"onUpdate:value":s[5]||(s[5]=e=>K.value.chat_public_key_version=e),placeholder:"请输入公钥版本号"},null,8,["value"])])),_:1}),(0,t.bF)(r,{"wrapper-col":{span:10,offset:6}},{default:(0,t.k6)((()=>[(0,t.bF)(W,{class:"mr8",onClick:D},{default:(0,t.k6)((()=>s[14]||(s[14]=[(0,t.eW)("取 消")]))),_:1}),(0,t.bF)(W,{type:"primary",onClick:E,loading:R.value},{default:(0,t.k6)((()=>s[15]||(s[15]=[(0,t.eW)("保 存 ")]))),_:1},8,["loading"])])),_:1})],64)):((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.bF)(r,{label:"会话存档密钥",name:"corp_id"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",F,(0,c.v_)((0,u.R1)(i.Xl)(K.value.chat_secret)),1)])),_:1}),(0,t.bF)(r,{label:"公钥版本号",name:"corp_id"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",L,(0,c.v_)(K.value.chat_public_key_version),1)])),_:1}),(0,t.bF)(r,{"wrapper-col":{span:10,offset:6}},{default:(0,t.k6)((()=>[(0,t.bF)(W,{type:"primary",onClick:s[6]||(s[6]=e=>C.value=!0)},{default:(0,t.k6)((()=>s[16]||(s[16]=[(0,t.eW)("修 改")]))),_:1})])),_:1})],64))])])])])),_:1}))])])),_:1})}}},w=l(1241);const R=(0,w.A)(C,[["__scopeId","data-v-77c1c744"]]);var X=R}}]);
//# sourceMappingURL=170.de2f1fcf.js.map