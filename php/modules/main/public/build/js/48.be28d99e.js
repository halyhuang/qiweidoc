"use strict";(self["webpackChunkzmwk_session_archive"]=self["webpackChunkzmwk_session_archive"]||[]).push([[48],{92798:function(A,a,e){e.r(a),e.d(a,{default:function(){return f}});var t=e(56768),s=e(24232),n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAkhJREFUWEfNVzFLQlEU/oSGBIeGNzg0ODg4NCSKBDU0Bq5tKrWEQyA0Jbg5SJMN5uBW+ANcRMipoaFBoSGwIbChwaGhIbDBIb6HL163+9697/nKDjweeu879zvnu+e754awZAsteX14BbAGwADA9yqAlXkAMwDv8+cVwJtuYLoAogBi80V1fH8AeAYwUU1WAWCUGwAiKkcO4wRyD4BvqbkBYNRxW5p9YgDpeQRAan6YEwDyzMiDNIL4QYkMANOeDiByETwzMRDpkAHYUm22TCYTyefz8VKpRH69GCuFIL5MBEDeEyqPo9HoOJFI7DcajRMfIL5RIQJQRk9w4/H4NBaL7fV6vbNsNnutAiyMsyLurP/sACgumzrOFgTAJUidKVZ2ACy59T8C8ALgSQTA6JkFpQWQga/NaM/Ajm7pBQCAJXkrZmBXGfp8QgAA6Onm3wHwTMF0Op10Op1mLpcz0+nBpBRQfrVOvUKhEK3X66eGYZhlOxwOL9Pp9JUHACxBU0V9laG10GAwOEylUgf8zWwUi8WTdrut7AEASMtQW4jskTIbrVbrPBwOR2ez2Xu/37/QUEepENGvlhSLqSaIarV6QHnmWKVSOarVaqbQSMxRijlX6zBy4rrb7e4lk8ntcrncdKHC9TCib+3N6GHTWVO/RS9uQmvS0huShalwyMyDrC90a0rZF7I5sXp/Hxk3P6HocENKy1OnLafYkBY/xlOPkftqy+0LLu1iIkZtXc0o2XzsVzNGSYn9lauZn/RrfaPaA1pOFpn0CdHJxCFImTRwAAAAAElFTkSuQmCC",i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAohJREFUWEfNl79y2kAQxr+VRB/quCCDybiLeYKgNyC9Z2J37uKMA2OqTCpnkCdDOndJZtyHN4A8Qew24IkKp4Zef9ZzApnjOKFDie1cB1rd/r7dvdUe4ZEXPbJ/bASw/S5oMKFJsF4CXAHwZC5gCuCSwVfE6I/PSkNTYUYAtVa4D9B7njnNXQTyAf4w8pyvecZrAXaOuBI6YR9EL/I20j0XIEFguX5PAOlXJsDzNr+OOepJYS7CIN6ZMuHguuv09ZCaf6vtsEmM70U96t6zyN7/1aVv6rOVCCRhL0U//4Fy1dc0DOy6mo4VgFor+m1abMOOnThpnEaGwaLLsWfXZeMlAFHtDHwx3A2j7gyg1jYFgDj3B/LpUADM1QvHxQDIH3n2s1TkHYBoMiAamKovCpDsz+ymzeoOoHoc9MiiNw8BwODP117pSPhaRKAVCvWNhwAAFsUoA0w2PXpFamAucDr2nLIaAd5E/V/VAICx5yTi5QhkAqTnfe88xs1kYaaLwFaZcHFo5fYHHUBmCgYdG1tl4M8EkCFUgNT50zJwMwHc7AalS4Fov7yrS4PY8OJwFUIGUJ3vnUcJsHYxhuMzx11KQd4x1EEMOrNQu6dxEvZU+Vrnog1oj6FBI1IhxG+xhFJT55mNKOnpBh8iGUIOr8h5nvJZyDNa8QzA7GOkQpg6n+c8+2MkDLZb2cUoK04hxH8mynXql4ow3XznhCthdE8DiW3X/Y/L86F2JjRNxSadkwmvdHNh5lBaPQ6bZCXDSTr7b+JPtp1ShLejT/oRff1YfsKVKIoHpiPaCiHzVeg4TTXsst3/fTFRFS2uZslFRbRt6WpGPiP+cS9Xs6LJN3nPKAUmGxW1uQXli0kwJkIxDwAAAABJRU5ErkJggg==",r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAApxJREFUWEfFV0ty2kAQfT144SW5ATmAsFjZIpUK3EA+geEEifcimCCv45zA5ATmBjiVihSvkMUBzA2iZRbWdEpSSQgQ6GOn0A6mp+d19+s3PYQDf3Tg81EKgPrT6DzXoAvBHyCpAUI9DIDhMcFhxuORj6nz3rwvGlghAMqvQY8EhgA3ijmmJQOjhTae5NnvBaDaw4YPf0rASZ6j7HVaCoiuo42Wu/bvBNB8+HwBX94kaa6GACB4QqLvtM1plotMAIpl6ES4q3pm1j4hRM85/fJ9c20LQJB2yf78xZFvn+QJrrU2y7EFoGkPnoqTrWSOiB337LqV3rUGIGI735Z0W8qcQf10d6wB+K/RJzBp6Wrjt/HPBIBqGx0JzEqFs2ksMXLfmVd5PBLP6MZilQBoWkbQch+rA1hFpljGHRH0nb4Y39y2+SlYTwAotjEjoFMJAMMTFDG8+WAMIXG11w/DcdtmSMZ0Bv7saz0GQn3PAhkTK0w9/KfcIAiee2a+WQdgG7xvY1w31TJ0mRIpAk0etXFfnQ/r8q+cF21hVzPD4FcZyAEA0FIci5bTGnkrvqT++z34CuawrkW+bQCWsbcEgVMGTRZBtLNhXR7LeXzRlNaPzBJYRiC/ai565ku3fX0TpDzIRlR3OSua+igQ3C80s7tJwmJtGNxuKU1XbMMpfV1ntWEpISJ2BB+dS+Ff5LZcRkozhSiwO6gUBwAUe9AjHPAyCrNQlIy5bM0yWL+I1kgYm+ddJJXOjaifyHXaR+ZIptqDnnzlUrDA+eJ0ey7cOZSGkgvcvng0C98MdLlrRM8dy8uKTDq9DDzWUNMrjeVpR1F3HOBhskm4UKwYOhNOiKGmn2YAgsfHD0GYOtorP80qM7/AxkJvwwJ+Kpv8A+BGODDf8skfAAAAAElFTkSuQmCC",o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAoxJREFUWEfNVz1s00AU/t41TiRgBHWBrkhhQ8QpQnGCYEAMTMAGGysswITUVGKiLLCywUaZGBADiMQRonEQWyN1LSwVjIAUO72HLsXFsc/2JURKM0XWu+/73r3fI8z5R3Pmx1QCuFwu4vDRxYDEonLAYrmDXz92qN/3J3XIWIC/XDtNUlwA4zIIDS0RowXCGxbyfXGj88VETK6A39XG8QUp7ywQ3WagaAjq7zI/3RXiyaFu61vWmUwBw2r9hmR+SKAlE+K4DYO3BdGDQrf9Iu18qoCB7TQFaGUa4vgZCV4teW5Th6UVENj1GgB3FuQRDMfy2p04ZkKAirnF/A7AyRkL2AqILsZzIiFgUHHWBNFdDfmmBL/KC4u6bgG6CuBUIhTMj0s99170+5gAVWpCik+abN8skLxO3U4/KzfCWHO1Vh6yeBkXQYAvhTwbLdExAWng8STS2ZnYKM/jdmMCAtvZAKiqi30WgSn5Hi53Lc9dDjn2Baj2OjxybJCVeDoiZR8tMZPyLfz8Xgrb9j8BFefEkGg7L/OzatqEXOEXmJeo535V//cF+HbjDIF7eQJ0cVTfTMlHQQBVil7r88ESwPMOgUkSAty0PHc1DJO69pkloQIKKvUPqbNeQx52xYnKkNGyeu3ziTIcCbDrqk0+SibiuOeB7awAFJtuydtJadv3La+9phVg0or15CHcnoipW/GonDKGEcDrSc/j98VNgK5NNYwUlBrHBZYfp92C0vqI2o6GJM7ljmMFoFYxZjw3aUqmNkS4qVvNDuZKFnr1dzV79h/b0RaAW7pVTFsFuuuc61oeFaRKlCVdEcCltJ1BzXoJvCXBr2f2MNHdylyeZqbZPqld7tNsUsBJ7f8APJKEMLY/PasAAAAASUVORK5CYII=",c="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAdtJREFUWEfFl9tZwjAYht+/LqAb4ATKBFKqXuMEygTqBOoGOoE6gdwrFCcQJ5AN7AI0Pk0LtiVIEtTmphfN4f2P+SI0PKTh83ECUDEdZvQIOEDRArYLAxKECSnvbDGQkLGtYVYAasgZcAX6UJsxBW4k4mHd5B8BVEyLGQOEvXUbrfg/JSCUkAzIOFYCqJhTUm5LbvZkIEHRl0MGpg2MAOqFHsKT74nGdQFnEvJY/7cEoN2e8vYLltfPSgho18OxDDDkwyHZ3JwkTKRLu7yoAlBk+73trhLlZayGKNs1QL9cHXUAJ+s9AaYSsTsHXgDoJpMSO1iCJwCkhHKUN6tvgKEuufN/AYA7ibioAoyIUXT+BUAxkcM8Gcse+HQtPe8QQCIRO3UAl0zWjtoAYLG27IHGARoOwYg3FPsuSeg9VxhLl3DjMvQGMJbhMx0Cp0ak73oNkTcwW7FibkRFT3dpxZniuS7WZd9MMdkMcysuNsqkl+1l5OuB1ZeRhvjbZKxYX0nCue8aFyQeobCJOyhOTLpwtSjNdWGWD3Ptb3fQ8qyEGZdybJbo62W5a4mVAZR+qPS8ZHlln6YeJnVvqqxZiX6a7RVtu/w0m5LyimIwVzs2MbN6mtls5DuncYAvpPq3IRjbMU4AAAAASUVORK5CYII=",l=e(90144),u=e(17694),d=e(59804),C=e(1576),k=e.n(C),y=e(67465),g=e(84164);const w={class:"zm-main-content"},p={key:0,class:"zm-line-clamp2"},E={key:0},B={key:1},I={key:2},Q={key:0,class:"status"},m={key:1,class:"status"},U={key:2,class:"status"},h={key:3,class:"status"},F={key:4,class:"status"},R={key:5,class:"status"},v={key:6},S=["onClick"],X=["onClick"],O=["onClick"];var D={__name:"fileExport",setup(A){const a=(0,l.KR)([{title:"导出来源",dataIndex:"export_type",width:120},{title:"文件名",dataIndex:"task_title",width:320},{title:"状态",dataIndex:"state",width:200},{title:"操作人",dataIndex:"create_user_info",width:150},{title:"导出时间",dataIndex:"created_at",width:200},{title:"操作",dataIndex:"id",width:180}]),e=(0,l.KR)(!1),C=(0,l.KR)([]),D=(0,l.KR)([]),M=(0,l.Kh)({type:void 0}),K=(0,l.Kh)({current:1,pageSize:10,total:0,pageSizeOptions:["10","20","50","100"],showQuickJumper:!0,showSizeChanger:!0});(0,t.sV)((()=>{f()}));const f=async()=>{e.value=!0;try{const A={page:K.current,size:K.pageSize,...M.type&&{type:M.type}},a=await(0,g.pU)(A);200===a.error_code&&(C.value=a.data.items||[],K.total=a.data.total||0,D.value=a.data.types||[])}catch(A){u.Ay.error("获取导出列表失败")}finally{e.value=!1}},J=A=>{K.current=A.current,K.pageSize=A.pageSize,f()},N=A=>{d.A.confirm({title:"提示",content:"确认取消此导出任务",onOk:async()=>{const a=u.Ay.loading("正在取消");try{const a=await(0,g.wW)({task_id:A.id,state:5});200===a.error_code?(u.Ay.success("取消成功"),f()):u.Ay.error(a.message||"取消失败")}catch(e){u.Ay.error("取消失败")}finally{a()}}})},G=A=>3!=A.state?u.Ay.error("未导出完成"):""===A.download_url?u.Ay.error("导出异常"):void(window.location.href=A.download_url),L=(A,a)=>{d.A.confirm({title:"提示",content:"确认删除此记录",onOk:async()=>{const a=u.Ay.loading("正在删除");try{const a=await(0,g.wW)({task_id:A.id,state:0});200===a.error_code?(u.Ay.success("删除成功"),f()):u.Ay.error(a.message||"删除失败")}catch(e){u.Ay.error("删除失败")}finally{a()}}})},Y=A=>A?k()(A).format("YYYY-MM-DD HH:mm:ss"):"--";return(A,l)=>{const u=(0,t.g2)("a-alert"),d=(0,t.g2)("a-table");return(0,t.uX)(),(0,t.Wv)(y.A,{title:"文件导出记录"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",w,[(0,t.bF)(u,{type:"info","show-icon":"",message:"您可以在这里查看您的导出任务，并下载导出文件；文件导出后系统只会保留7天，7天后将自动删除，请及时下载文件"}),(0,t.bF)(d,{class:"mt24",dataSource:C.value,columns:a.value,pagination:K,loading:e.value,onChange:J},{bodyCell:(0,t.k6)((({column:A,text:a,record:e,index:u})=>["task_title"===A.dataIndex?((0,t.uX)(),(0,t.CE)("div",p,(0,s.v_)(a),1)):"export_type"===A.dataIndex?((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[1===a?((0,t.uX)(),(0,t.CE)("span",E,"会话存档")):((0,t.uX)(),(0,t.CE)("span",B,(0,s.v_)(a),1))],64)):"created_at"===A.dataIndex?((0,t.uX)(),(0,t.CE)("span",I,(0,s.v_)(Y(a)),1)):"state"===A.dataIndex?((0,t.uX)(),(0,t.CE)(t.FK,{key:3},[1===a?((0,t.uX)(),(0,t.CE)("div",Q,l[0]||(l[0]=[(0,t.Lk)("img",{src:n},null,-1),(0,t.eW)(" 未开始 ")]))):2===a?((0,t.uX)(),(0,t.CE)("div",m,l[1]||(l[1]=[(0,t.Lk)("img",{src:i},null,-1),(0,t.eW)("导出中 ")]))):3===a?((0,t.uX)(),(0,t.CE)("div",U,l[2]||(l[2]=[(0,t.Lk)("img",{src:r},null,-1),(0,t.eW)(" 已完成 ")]))):4===a?((0,t.uX)(),(0,t.CE)("div",h,l[3]||(l[3]=[(0,t.Lk)("img",{src:o},null,-1),(0,t.eW)(" 导出失败 ")]))):5===a?((0,t.uX)(),(0,t.CE)("div",F,l[4]||(l[4]=[(0,t.Lk)("img",{src:c},null,-1),(0,t.eW)(" 已取消 ")]))):0===a?((0,t.uX)(),(0,t.CE)("div",R,l[5]||(l[5]=[(0,t.Lk)("img",{src:o},null,-1),(0,t.eW)(" 已删除 ")]))):((0,t.uX)(),(0,t.CE)("span",v,"--"))],64)):"id"===A.dataIndex?((0,t.uX)(),(0,t.CE)(t.FK,{key:4},[3===e.state?((0,t.uX)(),(0,t.CE)("a",{key:0,class:"mr16",onClick:A=>G(e)},"下载文件",8,S)):(0,t.Q3)("",!0),[3,4,5,0].includes(e.state)?((0,t.uX)(),(0,t.CE)("a",{key:1,class:"mr16",onClick:A=>L(e,u)},"删除记录",8,X)):(0,t.Q3)("",!0),[1,2].includes(e.state)?((0,t.uX)(),(0,t.CE)("a",{key:2,onClick:A=>N(e)},"取消导出",8,O)):(0,t.Q3)("",!0)],64)):(0,t.Q3)("",!0)])),_:1},8,["dataSource","columns","pagination","loading"])])])),_:1})}}},M=e(71241);const K=(0,M.A)(D,[["__scopeId","data-v-478abca1"]]);var f=K}}]);